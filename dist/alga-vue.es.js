import{ref as e,reactive as a,computed as u}from"vue";import{date as l,array as v,number as t}from"alga-js";function n(t=null,n=null,r=null,s={value:"en-US"},o={value:"short"}){const D=e(0),g=e(0),m=e(0),N=e(0),h=e([]),y=a({dateEvent:"startdate"});D.value=null!==t&&0!==t.value?t.value:Number((new Date).getFullYear()),g.value=null!==n&&0!==n.value?n.value:Number((new Date).getMonth())+1,m.value=null!==r&&0!==r.value?r.value:Number((new Date).getDate());const b=u((()=>l.days(s.value,o.value))),w=u((()=>l.week(D.value,g.value,m.value)));N.value=w.value;const d=u((()=>l.weeks(D.value,N.value,"YYYY-MM-DD"))),Y=u((()=>{const e=Number(new Date(D.value,Number(g.value)-1,1).getDay());let a=[];if(e>0){for(let u=Number(l.daysInMonth(D.value,Number(g.value)-1))-(e-1);u<=Number(l.daysInMonth(D.value,Number(g.value)-1));u++)a.push(u)}return a})),M=u((()=>l.daysInMonth(D.value,g.value))),f=u((()=>{const e=Number(new Date(D.value,Number(g.value)-1,Number(l.daysInMonth(D.value,g.value))).getDay());let a=[];if(e<6){const u=6-e;for(let e=1;e<=u;e++)a.push(e)}return a})),c=Number(new Date(D.value,Number(g.value)-1,m.value).getDay()),i=u((()=>{let e=[];if(c>0){const a=c+1;for(let u=1;u<a;u++)e.push(l.subtractDate(new Date(D.value,Number(g.value)-1,m.value),u),"YYYY-MM-DD")}return e})),p=u((()=>{let e=[];if(c<6){const a=6-c;for(let u=1;u<=a;u++)e.push(l.addDate(new Date(D.value,Number(g.value)-1,m.value),u),"YYYY-MM-DD")}return e})),k=u((()=>h.value.length>=1?v.group(h.value,(e=>{if(y.dateEvent in e)return new Date(e[y.dateEvent]).getDate()})):[])),E=u((()=>h.value.length>=1?v.group(h.value,(e=>{if(y.dateEvent in e)return new Date(e[y.dateEvent]).getHours()})):[]));return{setYearRef:D,setMonthRef:g,setDayRef:m,setWeeks:N,getWeeks:w,getWeekDays:d,getDayNames:b,getPrevDays:Y,getMonthDays:M,getNextDays:f,getBeforeDays:i,getAfterDays:p,setEvents:h,getEvents:k,getEventsByTime:E}}function r(a=null,v=null,n=null,r={value:"en-US"},s={value:"short"},o={value:"long"}){const D=e(0),g=e(0),m=e(0),N=e(0),h=e(0),y=e(""),b=e(0);D.value=null!==a&&0!==a.value?a.value:Number((new Date).getFullYear()),g.value=null!==v&&0!==v.value?v.value:Number((new Date).getMonth())+1,m.value=null!==n&&0!==n.value?n.value:(new Date).getDate();const w=u((()=>{const e=0!==N.value?N.value:1980,a=0!==h.value?h.value:Number((new Date).getFullYear())+5;return t.loop(e,a)})),d=u((()=>l.months(r.value,o.value))),Y=u((()=>l.days(r.value,s.value))),M=u((()=>l.week(D.value,g.value,m.value)));b.value=M.value;const f=u((()=>{let e="";return e="daily"===y.value?`${Y.value[new Date(D.value,Number(g.value)-1,m.value).getDay()]}, ${m.value} ${d.value[new Date(D.value,Number(g.value)-1).getMonth()]} ${D.value}`:"weekly"===y.value?`Week ${b.value}`:"yearly"===y.value?`${D.value}`:`${d.value[new Date(D.value,Number(g.value)-1).getMonth()]} ${D.value}`,e}));return{setYearRef:D,setMonthRef:g,setDayRef:m,setWeeks:b,setCalendarType:y,startYear:N,endYear:h,getRangeYears:w,getMonthNames:d,getDayNames:Y,getWeeks:M,getCalendarTitle:f,handleYear:e=>{D.value="prev"===e?D.value-1:"next"===e?D.value+1:(new Date).getFullYear()},handleMonth:e=>{"prev"===e?g.value>1&&g.value<=12?g.value=g.value-1:1===g.value&&(g.value=12,D.value=D.value-1):"next"===e?g.value>=1&&g.value<12?g.value=g.value+1:12===g.value&&(g.value=1,D.value=D.value+1):(g.value=Number((new Date).getMonth())+1,D.value=(new Date).getFullYear())},handleWeek:e=>{"prev"===e?1!==b.value?b.value=b.value-1:b.value=52:"next"===e?52!==b.value?b.value=b.value+1:b.value=1:b.value=M.value},handleDay:e=>{"prev"===e?1!==m.value?m.value=m.value-1:(m.value=Number(l.daysInMonth(D.value,Number(g.value)-1)),g.value>1&&g.value<=12?g.value=g.value-1:1===g.value&&(g.value=12,D.value=D.value-1)):"next"===e?m.value!==Number(l.daysInMonth(D.value,g.value))?m.value=m.value+1:(m.value=1,g.value>=1&&g.value<12?g.value=g.value+1:12===g.value&&(g.value=1,D.value=D.value+1)):(g.value=Number((new Date).getMonth())+1,D.value=(new Date).getFullYear(),m.value=(new Date).getDate())}}}export{r as handleCalendar,n as useCalendar};
